프로젝트: Raspberry Pi 기반 스마트 출입 통제 및 관제 시스템
프로젝트 버전: 2.1 (상세 UI/UX 기획 포함)
작성일: 2025-09-19
작성자: OOO
1. 프로젝트 개요 (Overview)
본 프로젝트는 Raspberry Pi 단일 보드를 사용하여 RFID 태그와 키패드 입력을 처리하는 스마트 출입 통제 시스템을 구축한다. Raspberry Pi의 GPIO를 직접 제어하여 하드웨어를 구동하고, 동시에 웹 서버를 운영하여 데이터 기반의 실시간 대시보드를 통해 출입 현황을 상세히 모니터링하고 원격으로 제어하는 기능을 제공한다.
2. 시스템 아키텍처 (System Architecture)
Raspberry Pi가 제어와 서버 역할을 모두 수행한다. 하드웨어 제어를 위해 Python 스크립트를, 웹 서비스 로직을 위해 Node.js 애플리케이션을 동시에 운영하며 두 프로세스는 내부 통신(IPC)을 통해 데이터를 교환한다.
+-----------------------------------------------------------------+      HTTPS/WSS      +--------------------------+
|                      Raspberry Pi                               | <----------------> |    웹 대시보드 (Vue.js)    |
| +--------------------------------+   Inter-Process   +----------+                      | - 실시간 로그/상태 모니터링  |
| |    Node.js (Express) App       |  Communication  | Python   |                      | - 원격 제어 UI           |
| | - Web/API/WebSocket Server     | <-------------> | Hardware |                      | - 데이터 시각화          |
| | - Business Logic & DB Control  |    (IPC)        | Script   |                      |                          |
| +--------------------------------+                 +----------+                      +--------------------------+
|           |                 |                |                |
|           V                 V                V                V
|     [   RFID   ]      [  Keypad  ]      [  Servo   ]      [  LED/Buzzer  ] (GPIO)
+-----------------------------------------------------------------+


3. 주요 기능 명세 (Features)
3.1. 하드웨어 제어 (Python Script)
[HC-01] 센서 입력 처리: Raspberry Pi의 GPIO를 통해 RFID(SPI) 및 키패드(GPIO Matrix) 입력을 지속적으로 처리한다.
[HC-02] 엑추에이터 구동: 서보모터(PWM), LED/부저(GPIO)를 제어하는 함수를 구현한다.
[HC-03] IPC 통신: 모든 하드웨어 이벤트를 Node.js 애플리케이션으로 전송하고, 제어 명령을 수신한다.
3.2. 백엔드 (Node.js - Express.js)
[BE-01] 데이터베이스 관리 (SQLite): users와 access_events 테이블을 관리하여 모든 출입 기록을 영구 저장한다.
[BE-02] 상태 추적 로직: access_events를 분석하여 현재 누가 내부에 있는지(current_occupants) 실시간으로 추적한다.
[BE-03] REST API 서버:
GET /api/users: 전체 사용자 목록 조회
POST /api/users: 신규 사용자 등록
GET /api/events: 전체 출입 이벤트 로그 조회
GET /api/status/occupants: 현재 입장해 있는 사용자 목록 조회
GET /api/stats/hourly-traffic: 시간대별 출입량 통계 데이터 조회
POST /api/manual-entry: 관리자 대시보드에서 수동으로 입장 이벤트를 생성한다.
[BE-04] 실시간 웹소켓 서버 (Socket.io): Python 스크립트로부터 받은 이벤트를 가공하여 모든 웹 클라이언트에 실시간으로 브로드캐스팅한다.
[BE-05] 원격 제어 명령 중계: 웹 요청을 IPC를 통해 Python 스크립트로 전달한다.
3.3. 프론트엔드 (Vue.js)
[FE-01] 실시간 상태 모니터링: 최근 출입자 정보와 현재 입장 인원 목록을 실시간으로 업데이트하여 표시한다.
[FE-02] 데이터 시각화 (Chart.js):
시간대별 입장 추이를 보여주는 선 그래프를 렌더링한다.
사용자별/전체 입장 횟수를 보여주는 막대 그래프를 렌더링한다.
[FE-03] 상세 로그 조회: 모든 출입 기록을 검색 및 필터링 가능한 테이블 형태로 제공한다.
[FE-04] 원격 관리 기능: 원격으로 문을 열거나, 대시보드에서 직접 신규 사용자를 등록하는 UI를 제공한다.
[FE-05] 수동 입장 기능: 관리자가 사용자 ID를 직접 입력하여 원격으로 입장 처리를 할 수 있는 UI를 제공한다.
4. 데이터 구조 정의 (Data Schema)
4.1. 데이터베이스 테이블
users
| Column | Type | Constraints | Description |
| :--- | :--- | :--- | :--- |
| id | INTEGER | PRIMARY KEY, AUTOINCREMENT | 사용자 고유 ID |
| name | TEXT | NOT NULL | 사용자 이름 |
| card_uid | TEXT | UNIQUE | RFID 카드 고유 UID |
| created_at| DATETIME | DEFAULT CURRENT_TIMESTAMP | 등록 일시 |
access_events
| Column | Type | Constraints | Description |
| :--- | :--- | :--- | :--- |
| id | INTEGER | PRIMARY KEY, AUTOINCREMENT | 이벤트 고유 ID |
| user_id | INTEGER | FOREIGN KEY (users.id) | 사용자 ID (실패 시 NULL 가능) |
| event_type| TEXT | NOT NULL | 'IN' (입장) 또는 'OUT' (퇴장) |
| method | TEXT | NOT NULL | 인증 방식 ('RFID' 또는 'KEYPAD') |
| status | TEXT | NOT NULL | 결과 ('SUCCESS' 또는 'FAILURE') |
| scanned_uid| TEXT | NULL | 스캔된 카드 UID (실패 기록용) |
| details | TEXT | NULL | 실패 사유 등 상세 정보 |
| timestamp | DATETIME | DEFAULT CURRENT_TIMESTAMP | 이벤트 발생 시간 |
5. 프론트엔드 UI/UX 상세 레이아웃
대시보드는 크게 3단 그리드 레이아웃으로 구성하여 정보를 체계적으로 표시한다.
+--------------------------------+--------------------------------------+--------------------------------+
|          [왼쪽 컬럼]           |             [중앙 컬럼]              |          [오른쪽 컬럼]         |
|      실시간 현황 & 상태        |          데이터 분석 & 로그          |          시스템 제어           |
+--------------------------------+--------------------------------------+--------------------------------+
|                                |                                      |                                |
| [ 1. 최신 인식 정보 ]          | [ 3. 시간대별 입장 추이 (선 그래프) ]  | [ 6. 원격 제어 패널 ]          |
|   - 이름/ID                    |                                      |   - 원격 문 열림 버튼          |
|   - 상태 (입장/퇴장)           |                                      |                                |
|                                |--------------------------------------|--------------------------------|
|--------------------------------|                                      |                                |
| [ 2. 현재 입장 인원 ]          | [ 4. 금일 총 입장 횟수 (막대 그래프) ] | [ 7. 사용자 관리 ]             |
|   - 명단 (스크롤)              |                                      |   - 신규 사용자 등록 폼        |
|   - 총 인원수                  |                                      |   - 등록된 사용자 목록         |
|                                |--------------------------------------|                                |
|                                |                                      |                                |
|                                | [ 5. 전체 출입 기록 (테이블) ]       |                                |
|                                |   - 검색/필터 기능                   |                                |
+--------------------------------+--------------------------------------+--------------------------------+


5.1. 왼쪽 컬럼: 실시간 현황
[1. 최신 인식 정보]:
평소에는 비어 있거나 "태그를 기다리는 중..." 텍스트가 표시되는 흰색 카드 형태.
RFID/키패드 인식이 발생하면, 해당 카드의 배경색이 성공 시 녹색, 실패 시 적색으로 1초간 점멸.
카드 내부에는 사용자 이름/ID와 '입장' 또는 '퇴장' 상태가 큰 폰트로 표시된다.
[2. 현재 입장 인원]:
백엔드에서 실시간으로 계산된 '현재 내부에 있는 사람' 목록을 표시한다.
목록 상단에는 "현재 인원: 5명"과 같이 총 인원수를 표시한다.
인원이 많아지면 스크롤이 가능한 영역이다.
5.2. 중앙 컬럼: 데이터 분석 & 로그
[3. 시간대별 입장 추이 (Chart.js 선 그래프)]:
X축은 시간(0시~23시), Y축은 입장 횟수.
"금일 시간대별 출입량"을 보여주는 라인 차트로, 관리자가 언제 가장 출입이 잦은지 직관적으로 파악할 수 있다.
[4. 금일 총 입장 횟수 (Chart.js 막대 그래프)]:
"성공"과 "실패" 횟수를 막대 두 개로 비교하여 보여준다.
이를 통해 비정상적인 접근 시도가 많았는지 쉽게 확인할 수 있다.
[5. 전체 출입 기록 (테이블)]:
access_events DB의 모든 기록을 시간 역순으로 표시하는 상세 로그.
테이블 상단에 이름, 날짜 등으로 로그를 검색하거나 필터링할 수 있는 입력창을 제공한다.
5.3. 오른쪽 컬럼: 시스템 제어
[6. 원격 제어 패널]:
"원격으로 문 열기" 버튼이 있어, 관리자가 물리적 접촉 없이 출입문을 제어할 수 있다.
[7. 사용자 관리]:
'신규 사용자 등록' 섹션에는 이름과 RFID 카드 UID를 입력하는 폼이 있다.
'등록된 사용자 목록'에서는 기존 사용자를 확인하거나 삭제할 수 있다.
이 문서는 프로젝트 진행 상황에 따라 지속적으로 업데이트될 수 있습니다.
